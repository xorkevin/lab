version: xorkevin.dev/anvil/v1alpha1

vars:
  outputdir: tailscale
  images:
    headscale:
      name: ghcr.io/xorkevin/headscale
      version: '0.12'
    derper:
      name: xorkevin/derper
      version: '1.18'
    postgres:
      name: postgres
      version: 14-alpine
  service:
    headscale:
      host: headscale.lab.xorkevin.com
      tls: true
      loglevel: info
      url: https://headscale.lab.xorkevin.com
      domain: xorkevin.lan
      derp:
        enabled: true
        host: beacon.lab.xorkevin.com
        port: 443
        updatefreq: 24h
      dns:
        - 8.8.8.8
        - 8.8.4.4
        - 1.0.0.1
        - 1.1.1.1
      oidc:
        issuer: https://lab.xorkevin.com
      users:
        - email: kevin@xorkevin.com
          ns: kevin
          admin: true
    derp:
      enabled: true
      host: beacon.lab.xorkevin.com
      tls: true
      manualtls: false
      manualtlsdomain: localhost

configtpl: componenttpl.yaml
